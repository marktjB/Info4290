<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <!-- <script src="https://www.gstatic.com/firebasejs/5.5.1/firebase.js"></script> -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Election Results</title>

  <!-- Bootstrap -->
  <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->
  <!-- From Other Example Code -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

  <!-- Materialize -->
  <!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
  <!-- Compiled and minified JavaScript -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
  <!-- Materialize -->

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>
  <ul id="dropdown1" class="dropdown-content">
    <li><a href="#!">one</a></li>
    <li><a href="#!">two</a></li>
    <li class="divider"></li>
    <li><a href="#!">three</a></li>
  </ul>
  <nav>
    <!-- <div class="container-fluid"> -->
    <div class="container-fliud nav-wrapper blue-grey darken-4">
      <p class="brand-logo"><img src=img/logoWcircle.png alt="Logo" width="45" /> Can-Vote</p>
      <ul class="right hide-on-med-and-down">
        <!-- <li><p id="accountAddress"></p></li> -->
        <li><a class="dropdown-trigger" href="#!" data-target="dropdown">Dropdown<i
              class="material-icons right">arrow_drop_down</i></a></li>
      </ul>
      </ul>
    </div>
  </nav>
  <!-- <nav class="navbar navbar-dark fixed-top bg-dark flex-md-nowrap p-0 shadow"><div><img src=logoWcircle.png alt="Logo" width="40" /></div></nav> -->
  <!-- NavBar -->
  <div class="container" style="width: 650px;">
    THIS IS FIREBASE
    <pre id='object'></pre>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/7.11.0/firebase-app.js"></script>
    <!-- Extra lines from https://stackoverflow.com/questions/38248723/firebase-database-is-not-a-function -->
    <script src="https://www.gstatic.com/firebasejs/7.11.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.11.0/firebase-database.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/7.11.0/firebase-analytics.js"></script>

    <script>
      // Your web app's Firebase configuration
      var firebaseConfig = {

        apiKey: "AIzaSyBkM0tuAI8ywCKuLKIThxd2ucT7lxSmmvs",
        authDomain: "info4290-31169.firebaseapp.com",
        databaseURL: "https://info4290-31169.firebaseio.com",
        projectId: "info4290-31169",
        storageBucket: "info4290-31169.appspot.com",
        messagingSenderId: "911386490534",
        appId: "1:911386490534:web:99737c027c3b44f1e16667"
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      firebase.analytics();
    </script>
    <script>
      //Data Object Change Listener
      //needs to match names being read - STEVEN NOTE
      const preObject = document.getElementById('object'); //this refers to the id tag in html
      const dbRefObject = firebase.database().ref().child(
        'candidates'); //Change this one to match specific call from Realtime data ('name')

      dbRefObject.on('value', snap => {

        console.log(snap.val());
        preObject.innerText = JSON.stringify(snap.val(), null, 3);

      }, function (error) {
        // The fetch failed.
        console.error(error);
      });
    </script>
    THIS IS FIREBASE
    <div class="row">
      <div class="col-lg-12">
        <h1 class="text-center">List of Candidates</h1>
        <hr />
        <br />
        <div id="loader">
          <p class="text-center">Loading...</p>
        </div>
        <div id="content" style="display: none;">
          <table class="table">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Votes</th>
              </tr>
            </thead>
            <tbody id="candidatesResults">
            </tbody>
          </table>
          <hr />
          <form onSubmit="App.question1(); return false;">
            <fieldset>
              <legend>Personalia:</legend>
              <label for="fname">First name:</label>
              <input type="text" id="fname" name="fname"><br><br>
            </fieldset>
            <button type="submit" class="btn btn-primary">Login</button>
          </form>
          <p id="accountAddress" class="text-center"></p>
        </div>
      </div>
    </div>
  </div>


  <script>
    $(document).ready(function () {
      $(".dropdown-trigger").dropdown();
    });
  </script>

  <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="js/bootstrap.min.js"></script>
  <script src="js/web3.min.js"></script>
  <script src="js/truffle-contract.js"></script>
  <script src="js/app.js"></script>
  <script src="js/login_script.js"></script>
</body>

</html>